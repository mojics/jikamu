<html>
<head>
<script src="jquery.js" type="text/javascript"></script>
<script src="jquery.address.js" type="text/javascript"></script>
<script src="jikamu.js" type="text/javascript"></script>
<script type="text/javascript">
    /*
    Test Jikamu Page
    */
    if ((_ref1 = window.cashier_app) == null) {
      window.SimpleApp = {};
    }
    
    SimpleApp.banks = [];
    _jq = jQuery;
    SimpleApp.route = new Jikamu.Route();
    
    SimpleApp.route
        .urlpath('/blog')
        .page(
            {
                page_name: "Blog Page",
                controller: function(){
                    $("#container").html('Blog Page');
                },
                before_load:function(){
                    console.log('Before loading Blog page');
                },
                after_load:function(){
                    console.log('After loading blog page');
                }
            }
        )
        .save();
    
    SimpleApp.route
        .urlpath('/')
        .page(
            {
                page_name: "Main Index Page",
                controller: function(){
                    var _def = new _jq.Deferred();
                    $("#container").html('Index Page');
                    _jq.ajax({
                        type: "GET",
                        url: 'http://api.geonames.org/countryCodeJSON?formatted=true&lat=47.03&lng=10.2&username=demo&style=full',
                        dataType: "jsonp",
                        async : false,
                        success:function(info){
                            console.log(info);
                            _def.resolve();
                        }
                    });
                    return _def.promise();
                },
                before_load:function(){
                    var _def = new _jq.Deferred();
                    console.log(self);
                    console.log('Before loading Index page');
                    /*Load Payment Options*/
                    _jq.ajax({
                        type: "GET",
                        url: 'http://api.geonames.org/countryCodeJSON?formatted=true&lat=47.03&lng=10.2&username=demo&style=full',
                        dataType: "jsonp",
                        async : false,
                        success:function(info){
                            console.log(info);
                            _def.resolve();
                        }
                    });
                    return _def.promise();
                },
                after_load:function(){
                    console.log('After loading Index page');
                }
            }
        )
        .save();
    
    
    new Jikamu.App().start();
</script>
</head> 
<body>
    <div id="container">
        JikamuJS 
    </div>
</body>
</html>
